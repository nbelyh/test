$(document).ready(function(){function r(n){return n.Address?n.Address:n.PageId?t?document.location.href.replace("__"+t.CurrentPage.Id,"__"+n.PageId):"#":null}function e(n){return n.Description?n.Description:n.SubAddress?n.Address?n.Address+"["+n.SubAddress+"]":n.SubAddress:n.Address}function u(t,i){var u=n[t],f=$("<span>No Links<\/span>"),s,h,l,o;if(u){f=$("<table class='table borderless' />");s=f.append($("<tbody />"));for(h in u.Links){var c=u.Links[h],a=r(c),v=e(c),y=$("<a />").attr("href",a).text(v);s.append($("<tr />").append($("<td />").append(y)))}if(i)return;u.DefaultLink&&(l=u.Links[u.DefaultLink-1],o=r(l),o&&(document.location=o))}$("#panel-links").html(f)}var n,t,i,f;if(window.svgpublish=window.svgpublish||{},n=window.svgpublish.diagramData,t=window.svgpublish.pageData,!n||!window.svgpublish.enableLinks){$("#shape-links").hide();return}$("div.svg").on("click",function(){u()});for(i in n)if(f=n[i],f.Links)$("#"+i).css("cursor","pointer").on("click",function(n){u($(this).attr("id"),n.ctrlKey)})});$(document).ready(function(){var n,i,r,t;if(window.svgpublish=window.svgpublish||{},n=window.svgpublish.pageData,!n||!n.Pages||!window.svgpublish.enablePages){$("#shape-pages").hide();return}for(i=n.Pages,r=$('<ul class="nav nav-stacked nav-pills"/>'),t=0;t<i.length;++t){var u=i[t],e=document.location.href.replace("__"+n.CurrentPage.Id,"__"+u.Id),o=u.Name,s=$("<a />").attr("href",e).text(o),f=$("<li />");u.Id===n.CurrentPage.Id&&f.addClass("active");f.append(s).appendTo(r)}$("#panel-pages").html(r)});$(document).ready(function(){function t(t){var u=n[t],i=$("<span>No Shape Data<\/span>"),e,o,f,s,r;if(u){i=$("<table class='table table-bordered table-striped' />");e=i.append($("<thead />"));o=i.append($("<tbody />"));e.append($("<tr />").append($("<th />").text("Property")).append($("<th />").text("Value")));for(f in u.Props)s=f,r=u.Props[f],r==null&&(r=""),o.append($("<tr />").append($("<td />").text(s)).append($("<td />").text(r)))}$("#panel-props").html(i)}var n,i;if(window.svgpublish=window.svgpublish||{},n=window.svgpublish.diagramData,!n||!window.svgpublish.enableProps){$("#shape-props").hide();return}$("div.svg").on("click",function(){t()});for(i in n)$("#"+i).on("click",function(){t($(this).attr("id"))})});$(document).ready(function(){function u(){r?$("#"+n).removeAttr("filter"):$("#"+n).css("opacity",1)}function e(t){n=$(t).attr("id");r?$(t).attr("filter","url(#select)"):$(t).css("opacity","0.5")}var i,r,n,f,t;if(window.svgpublish=window.svgpublish||{},i=window.svgpublish.diagramData,i&&window.svgpublish.enableSelection){r=SVGFEColorMatrixElement&&SVGFEColorMatrixElement.SVG_FECOLORMATRIX_TYPE_SATURATE==2;$("div.svg").on("click",function(){u()});for(f in i){t=$("#"+f);t.css("cursor","pointer");t.on("click",function(n){n.stopPropagation();u();e(this)});if(r){t.on("mouseover",function(){var t=$(this).attr("id"),r;n!==t&&(r=i[t],$(this).attr("filter",r.DefaultLink?"url(#hyperlink)":"url(#hover)"))});t.on("mouseout",function(){var t=$(this).attr("id");n!==t&&$(this).removeAttr("filter")})}}}});$(document).ready(function(){function c(){return r>600}function u(i,r){i?($("#diagram-sidebar").show().animate({width:n+"px"},r),$("#sidebar-toggle").addClass("rotated").animate({left:n-2+"px"},r)):($("#diagram-sidebar").animate({width:"0"},r,function(){$("#diagram-sidebar").hide()}),$("#sidebar-toggle").removeClass("rotated").animate({left:"0"},r));c()&&t&&(t.setItem("DiagramSidebarVisible",i?"1":"0"),t.setItem("DiagramSidebarWidth",n))}var n,t,f,r,h,e,i,o,s;if(window.svgpublish=window.svgpublish||{},!window.svgpublish.enableSidebar){$("#sidebar-toggle").hide();$("#diagram-sidebar").hide();return}n=400;$("#sidebar-toggle").on("dragstart",function(){return!1});try{t=window.localStorage}catch(l){}f=t?parseInt(t.getItem("DiagramSidebarWidth")):0;f>0&&(n=f);r=$(window).width()-$("#sidebar-toggle").width()-40;n>=r&&(n=r);h=t?t.getItem("DiagramSidebarVisible")=="1":0;$("#sidebar-toggle").show();c()&&u(h,0);o=function(n){if(i){var t=n.clientX-i+e;t<0&&(t=0);$("#diagram-sidebar").width(t+"px").show();$("#sidebar-toggle").css("left",t+"px")}};s=function(t){$(document).off("mousemove",o);$(document).off("mouseup",s);var r=t.clientX-i+e;r<0&&(r=0);Math.abs(t.clientX-i)<20?u(r<20,400):(n=r,u(!0,0));i=null};$("#sidebar-toggle").on("mousedown",function(n){i=n.clientX;e=$("#diagram-sidebar").width();$(document).on("mousemove",o).on("mouseup",s)});window.svgpublish.showSidebar=u}),function(n){n.fn.extend({panzoom:function(n){return this.each(function(){PanZoom(this,n)})}})}(jQuery);var PanZoom=function(n,t){function rt(n,t,i,r){var u=n/t;return(n>i||t<r)&&(n=i,t=Math.floor(n/u)),(t>r||n<i)&&(t=r,n=Math.floor(t*u)),{width:n,height:t}}function a(){return $(n).find("#viewport").get(0)}function k(){var t,r,s;if(b){var e=b.split(" "),o=parseFloat(e[2]),h=parseFloat(e[3]),u=$(n).width(),f=$(n).height();typeof i.createSVGMatrix=="function"&&(t=i.createSVGMatrix(),r=rt(o,h,u,f),r.width<u&&(t=t.translate((u-r.width)/2,0)),r.height<f&&(t=t.translate(0,(f-r.height)/2,0)),t=t.scale(r.width/o),s=$(i).find("#viewport").get(0),p(s,t))}}function v(n){return n.originalEvent?n.originalEvent.touches?n.originalEvent.touches[0]:n.originalEvent:n}function y(t){var r=i.createSVGPoint();return r.x=t.pageX-$(n).offset().left,r.y=t.pageY-$(n).offset().top,r}function ut(){var t=i.createSVGPoint();return t.x=$(n).width()/2,t.y=$(n).height()/2,t}function p(t,r){var u="matrix("+r.a+","+r.b+","+r.c+","+r.d+","+r.e+","+r.f+")";t.setAttribute("transform",u);navigator.userAgent.match(/trident|edge/i)&&typeof i.style.strokeMiterlimit!="undefined"&&(i.style.strokeMiterlimit=i.style.strokeMiterlimit!=="3"?"3":"2");l&&l(n)}function d(n){var t,i;tt&&(n.preventDefault&&n.preventDefault(),n.returnValue=!1,t=n.originalEvent.wheelDelta?n.originalEvent.wheelDelta/360:n.originalEvent.detail/-9,i=Math.pow(1+o,t),f(i,n))}function f(n,t){var o=t?y(v(t)):ut(),r=a(),f=o.matrixTransform(r.getCTM().inverse()),e=i.createSVGMatrix().translate(f.x,f.y).scale(n).translate(-f.x,-f.y);p(r,r.getCTM().multiply(e));u==null&&(u=r.getCTM().inverse());u=u.multiply(e.inverse())}function e(n,t){return{pageX:n[t].pageX,pageY:n[t].pageY}}function w(n,t){var i=n.pageX-t.pageX,r=n.pageY-t.pageY;return Math.sqrt(i*i+r*r)}function g(n){var t,i,o,l,b,k;n.preventDefault&&n.preventDefault();n.returnValue=!1;r==="pinch"&&(t=n.originalEvent.touches,t&&t.length===2&&(i=e(t,0),o=e(t,1),n.pageX=(i.pageX+o.pageX)/2,n.pageY=(i.pageY+o.pageY)/2,l=w(i,o),f(l/c,n),c=l));b=v(n);r==="down"&&w(b,h)>it&&(r="pan");r==="pan"&&(k=y(b).matrixTransform(u),p(a(),u.inverse().translate(k.x-s.x,k.y-s.y)))}function ft(n){return n.preventDefault&&n.preventDefault(),nt(n)}function nt(n){var t=n.originalEvent.touches,i,f;t&&t.length===2?(i=e(t,0),f=e(t,1),c=w(i,f),r="pinch"):(u=a().getCTM().inverse(),h=v(n),s=y(h).matrixTransform(u),r="down")}function et(n){(r=="pan"||r=="pinch")&&n.stopPropagation&&n.stopPropagation();r=null}var tt=1,o=.5,it=3,r=null,s=null,h=null,u=null,c=null,l=null,i=t.svg,b=t.viewBox;k();$.contains(document,i)||(i=$(n).html(i).find("svg").get(0));navigator.userAgent.match(/trident|edge/i)&&(SVGElement.prototype.getBoundingClientRect=function(){var f=i.createSVGPoint(),n=this.getBBox(),e=this.getScreenCTM(),t,u,r;return f.x=n.x,f.y=n.y,t=f.matrixTransform(e),u=i.createSVGPoint(),u.x=n.x+n.width,u.y=n.y+n.height,r=u.matrixTransform(e),{left:t.x,top:t.y,right:r.x,bottom:r.y,width:r.x-t.x,height:r.y-t.y}});$(n).on("mousedown",ft).on("mousemove",g).on("touchstart",nt).on("touchmove",g);if($(n).get(0).addEventListener("click",et,!0),navigator.userAgent.toLowerCase().indexOf("firefox")>=0)$(n).on("DOMMouseScroll",d);else $(n).on("mousewheel",d);return{zoomIn:function(){f(Math.pow(1+o,1))},zoomOut:function(){f(Math.pow(1+o,-1))},zoomReset:function(){k()},onViewChanged:function(n){l=n}}};$(document).ready(function(){window.svgpublish=window.svgpublish||{};var n=window.svgpublish.diagramData;n&&window.svgpublish.enableTooltips&&$.each(n,function(t){var i=n[t];i.Comment&&$("#"+t).tooltip({container:"body",title:i.Comment})})});